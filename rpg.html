<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Love Quest RPG - Forest Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="rpg-style.css">
</head>

<body>
    <header class="score-header">
        ğŸ’– Love Points: <span id="xp-count">+0</span>
    </header>

    <section class="quest-section">
        <div id="quest-box" style="text-align: center; font-size: 1.8em; font-weight: bold; margin: 20px auto;">
            <span id="quest-text">ë¡œë”© ì¤‘...</span>
        </div>
    </section>

    <section class="map-section">
        <div class="bridge-container" id="bridge-container"></div>
        <div id="countdown" style="text-align:center; font-size: 1.2em; margin-top: 10px;"></div>
    </section>

    <section class="dual-input-section">
        <div class="side user-side">
            <div class="character user" id="user-character"></div>
            <textarea id="user-input" placeholder="ì§„ë¿¡ì´ì˜ ë¿¡ ğŸ’Œ"></textarea>
            <button class="submit-btn" id="user-submit">ì§„ë¿¡ì´ ì œì¶œí•˜ê¸°</button>
        </div>

        <div class="side partner-side">
            <div class="character partner" id="partner-character"></div>
            <textarea id="partner-input" placeholder="ì¤€ë¿¡ì´ì˜ ë¿¡ ğŸ’Œ"></textarea>
            <button class="submit-btn" id="partner-submit">ì¤€ë¿¡ì´ ì œì¶œí•˜ê¸°</button>
        </div>
    </section>

    <script>
        const quests = [
            "ì˜¤ëŠ˜ì˜ í•œë§ˆë””ë¥¼ ì ì–´ì¤˜ ë¿¡!",
            "ì˜¤ëŠ˜ì˜ ì¶”ì²œ ë…¸ë˜ë¥¼ ì ì–´ì¤˜ ë¿¡!",
            "ì˜¤ëŠ˜ ê¸°ì–µì— ë‚¨ëŠ” ìˆœê°„ì€?",
            "ì„œë¡œì—ê²Œ í•˜ê³  ì‹¶ì€ ì¹­ì°¬ í•œë§ˆë””!",
            "ìš”ì¦˜ ë¹ ì§„ ìŒì‹ì€ ë­ì•¼?",
            "ì˜¤ëŠ˜ì˜ ê¸°ë¶„ì„ ìƒ‰ìœ¼ë¡œ í‘œí˜„í•œë‹¤ë©´?"
        ];

        const bridgeContainer = document.getElementById('bridge-container');
        const xpCount = document.getElementById('xp-count');
        const userInput = document.getElementById('user-input');
        const partnerInput = document.getElementById('partner-input');
        const userSubmitBtn = document.getElementById('user-submit');
        const partnerSubmitBtn = document.getElementById('partner-submit');
        const countdownDiv = document.getElementById('countdown');
        const questText = document.getElementById('quest-text');

        let xp = 0;
        let submittedByUser = false;
        let submittedByPartner = false;
        let countdownStarted = false;
        let currentQuest = '';
        let currentLevel = 1;

        function getRandomQuest() {
            return quests[Math.floor(Math.random() * quests.length)];
        }

        function addNewStone() {
            const newStone = document.createElement('div');
            newStone.classList.add('stone');
            newStone.textContent = `ì–´ë–»ê²Œ ë§Œë“œëŠ”ì§€ ì˜ ëª°ë¼ì„œ ê·¸ëƒ¥ ëƒ…ë’€ì˜¤..ã… ì˜¤ë¹  ìƒì¼ ì¶•í•˜í–„ã…ã…`;
            bridgeContainer.appendChild(newStone);
            currentQuest = getRandomQuest();
            questText.textContent = `ì˜¤ëŠ˜ì˜ í€˜ìŠ¤íŠ¸: ${currentQuest}`;
            enableInputs(true);
        }

        function enableInputs(enable) {
            userInput.disabled = !enable;
            partnerInput.disabled = !enable;
            userSubmitBtn.disabled = !enable || submittedByUser;
            partnerSubmitBtn.disabled = !enable || submittedByPartner;
        }

        function resetInputs() {
            userInput.value = '';
            partnerInput.value = '';
            submittedByUser = false;
            submittedByPartner = false;
            enableInputs(false);
        }

        function startCountdown() {
            if (countdownStarted) return;
            countdownStarted = true;
            let remaining = 86400;
            const interval = setInterval(() => {
                const hours = String(Math.floor(remaining / 3600)).padStart(2, '0');
                const minutes = String(Math.floor((remaining % 3600) / 60)).padStart(2, '0');
                const seconds = String(remaining % 60).padStart(2, '0');
                countdownDiv.textContent = `â³ ë‹¤ìŒ í€˜ìŠ¤íŠ¸ê¹Œì§€ ë‚¨ì€ ì‹œê°„: ${hours}:${minutes}:${seconds}`;

                if (remaining <= 0) {
                    clearInterval(interval);
                    countdownDiv.textContent = '';
                    currentLevel++;
                    addNewStone();
                    countdownStarted = false;
                }
                remaining--;
            }, 1000);
        }

        function checkSubmitCondition() {
            const userText = userInput.value.trim();
            const partnerText = partnerInput.value.trim();

            if (userText && partnerText && submittedByUser && submittedByPartner) {
                xp++;
                xpCount.textContent = `+${xp}`;
                questText.textContent = `ì˜¤ëŠ˜ì˜ í€˜ìŠ¤íŠ¸ ì™„ë£Œ!`;
                startCountdown();
                resetInputs();
            }
        }

        userSubmitBtn.addEventListener('click', () => {
            const userText = userInput.value.trim();
            if (!userText) {
                alert('ì§„ë¿¡ì´ì˜ ë©”ì‹œì§€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }
            submittedByUser = true;
            userSubmitBtn.disabled = true;
            alert("ìœ ì§„ì´ ì œì¶œ ì™„ë£Œ! ìƒëŒ€ë°©ë„ ì œì¶œí•˜ë©´ ë‹¤ìŒ í€˜ìŠ¤íŠ¸ë¡œ ë„˜ì–´ê°€ìš” âœ¨");
            checkSubmitCondition();
        });

        partnerSubmitBtn.addEventListener('click', () => {
            const partnerText = partnerInput.value.trim();
            if (!partnerText) {
                alert('ì¤€ë¿¡ì´ì˜ ë©”ì‹œì§€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }
            submittedByPartner = true;
            partnerSubmitBtn.disabled = true;
            alert("ì¤€ë¿¡ì´ ì œì¶œ ì™„ë£Œ! ë‹¤ìŒ í€˜ìŠ¤íŠ¸ë¡œ ì´ë™í•©ë‹ˆë‹¤ ğŸ’–");
            checkSubmitCondition();
        });

        addNewStone();
    </script>
</body>

</html>